function replaceVars(e,t){for(key in e){t=t.replace("{"+key+"}",e[key])}return t}function hwvs(){var e=document.getElementsByTagName("table")[0];if(typeof e!="undefined"){var t=e.getElementsByTagName("tbody")[0];var n=t.rows;var r=new Array;var i=$(e.getElementsByTagName("p")[0]).text();costs.shipping=18.99;costs.total="€"+(parseFloat(hwvsFixPrice(i),10)+costs.shipping).toFixed(2);costs.shipping="€"+costs.shipping;r.push(replaceVars(costs,before));for(var s=1;s<n.length;s++){var o=n[s].cells[0];if($(o).attr("colspan")){continue}item.itm_name=$("a",o).text().trim();item.itm_url="http://"+window.location.hostname+"/"+$("a",o).attr("href");item.itm_price=$(n[s].cells[4]).text().trim();item.itm_quantity=formatQuantity($("input:eq(0)",n[s].cells[3]).val());item.itm_price="€"+hwvsFixPrice(item.itm_price.substring(0,item.itm_price.length-2));r.push(replaceVars(item,format))}r.push(replaceVars(costs,after))}else{alert("You must place an item in your basket first.")}return r}function hwvsFixPrice(e){return e.replace(".","").replace(",",".")}function scan(){var e=new Array;costs.total=$("div.btRight").text();costs.shipping="£"+$("#ctl00_ContentPlaceHolder2_labelTotalCarriage").text();e.push(replaceVars(costs,before));$(".btRow").each(function(t){item.itm_url=$(".btDesc a",this).attr("href");item.itm_name=$(".btDesc a",this).text().trim();item.itm_price=$(".btInc",this).text().trim();item.itm_quantity=formatQuantity($(".btQty input",this).val());e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function newegg(){var e=new Array;costs.total=jQuery("tr.cartSubtotal td:eq(1)").text();costs.shipping="- ? -";e.push(replaceVars(costs,before));jQuery("tr.cartItem").each(function(t){item.itm_price=jQuery('td.cartPrice dd[class!="cartOrig"]',this).text();item.itm_url=jQuery('a[name="CART_ITEM"]',this).attr("href");item.itm_name=jQuery('a[name="CART_ITEM"]',this).text().trim();item.itm_quantity=formatQuantity(jQuery("td.cartQty input:eq(0)",this).attr("value"));e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function amazon(){var e=new Array;costs.total=jQuery("div#cart-subtotal span").text().trim();costs.shipping="- ? -";e.push(replaceVars(costs,before));jQuery('.cart-item[type="active"]').each(function(t){item.itm_price=jQuery(this).attr("price");item.itm_url=jQuery("a",this).attr("href");item.itm_name=jQuery("a:eq(0)",this).text();item.itm_quantity=jQuery(this).attr("quantity");if(item.itm_quantity!="1"){item.itm_price=item.itm_price.substring(0,1)+(parseFloat(item.itm_price.substring(1),10)*item.itm_quantity).toFixed(2)}item.itm_quantity=formatQuantity(item.itm_quantity);e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function dabs(){var e=new Array;costs.total=$("#baskettotal").text().trim();costs.shipping=$("#delivery").text().trim();e.push(replaceVars(costs,before));$(".basket-item").each(function(t){item.itm_url="http://www.dabs.ie"+$(".title",this).attr("href");item.itm_name=$(".title",this).text().trim();item.itm_price=$(".price:eq(0)",this).text();item.itm_quantity=formatQuantity($(".item-qty-box",this).val());e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function memoryc(){var e=new Array;costs.total=jQuery("#bctotal_price").text();costs.shipping="Free!";e.push(replaceVars(costs,before));jQuery('.blue_border_tr:eq(0) tr:contains("Item Number")').each(function(t){item.itm_url=jQuery(".prod_desc",this).attr("href");item.itm_name=jQuery(".title_green_font",this).text();item.itm_price=jQuery('span[id^="cart_vat"]',this).text().match(/VAT(.\s[^\s]+)/i)[1];item.itm_quantity=formatQuantity(jQuery('input[name^="quantity"]',this).val());e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function overclockers(){var e=new Array;costs.total=document.getElementById("orderTotal").cells[2].innerHTML;costs.shipping=document.getElementsByClassName("totalRow")[1].getElementsByTagName("td")[2].innerHTML;e.push(replaceVars(costs,before));var t=document.getElementById("shoppingBkt");var n=t.rows;for(var r=1;r<n.length-4;r++){item.itm_url=n[r].cells[1].getElementsByTagName("a")[0].href;item.itm_name=n[r].cells[1].getElementsByTagName("a")[0].innerHTML;item.itm_price=n[r].cells[4].getElementsByTagName("span")[0].innerHTML;item.itm_quantity=formatQuantity(n[r].cells[2].getElementsByTagName("input")[0].value);e.push(replaceVars(item,format))}e.push(replaceVars(costs,after));return e}function aria(){var e=new Array;var t=document.getElementsByName("operation")[0].nextSibling.nextSibling;var n=t.rows;costs.total=n[n.length-2].cells[1].innerHTML.trim();costs.shipping=n[n.length-4].cells[1].innerHTML.trim();e.push(replaceVars(costs,before));for(var r=2;r<n.length-9;r++){item.itm_url=n[r].cells[3].getElementsByTagName("a")[0].href;item.itm_name=n[r].cells[3].getElementsByTagName("a")[0].innerHTML.trim();item.itm_price=n[r].cells[6].innerHTML.trim();item.itm_quantity=formatQuantity(n[r].cells[1].getElementsByTagName("input")[0].value);e.push(replaceVars(item,format))}e.push(replaceVars(costs,after));return e}function specialtech(){var e=new Array;var t=document.forms["cartform"].getElementsByTagName("table");var n=t[0].rows;var r=t[t.length-2];costs.shipping=r.rows[3].cells[2].getElementsByTagName("font")[0].innerHTML;var i=5;if(costs.shipping!="£ 0.00"){var s=parseFloat(r.rows[4].cells[2].getElementsByTagName("font")[0].innerHTML.substring(2),10);costs.shipping="£"+(parseFloat(costs.shipping.substring(2),10)+s).toFixed(2);i=6}costs.total=r.rows[i].cells[2].getElementsByTagName("font")[0].innerHTML;e.push(replaceVars(costs,before));for(var o=0;o<n.length;o+=2){item.itm_url=n[o].cells[0].getElementsByTagName("a")[0].href;item.itm_name=n[o].cells[1].getElementsByTagName("font")[0].innerHTML.trim();item.itm_price=n[o].cells[1].getElementsByTagName("font")[2].innerHTML.trim();var u=n[o].cells[1].getElementsByTagName("div")[0].innerHTML.match(/exc VAT (\d+)%/i)[1];item.itm_price="£"+addVAT(item.itm_price.substring(2),u);item.itm_quantity=formatQuantity(n[o].cells[1].getElementsByTagName("input")[0].value);e.push(replaceVars(item,format))}e.push(replaceVars(costs,after));return e}function komplett(){var e=new Array;costs.shipping=document.getElementById("ctl00_siteContentPlaceHolder_shoppingCart_dlgShoppingCart_shipmentSelect_Dialog1_repShipment_ctl00_lblPrice").innerHTML;costs.total=document.getElementById("ctl00_siteContentPlaceHolder_shoppingCart_dlgShoppingCart_lblTotalValue").innerHTML;e.push(replaceVars(costs,before));$(".shoppingcart-item").each(function(){item.itm_url=this.getElementsByTagName("a")[0].href;item.itm_name=$(".shoppingcart-item-description h4",this).text().trim();item.itm_price=$(".shoppingcart-item-subtotal",this).text().trim();item.itm_quantity=formatQuantity($(".shoppingcart-item-quantity input:eq(0)",this).val());e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function computeruniverse(){var e=new Array;var t=parseFloat(hwvsFixPrice(jQuery(".pricecart:eq(0)").text().substring(1)),10);var n=parseFloat(hwvsFixPrice(jQuery(".pricecart:eq(1)").text().substring(1)),10);costs.shipping="€"+(n-t).toFixed(2);costs.total="€"+n;e.push(replaceVars(costs,before));jQuery('.text2[name!="add"]').parent().parent().each(function(t){item.itm_url=window.location.protocol+"//"+window.location.hostname+jQuery("a:eq(2)",this).attr("href");item.itm_name=jQuery("a:eq(2)",this).text();item.itm_price=jQuery(".lightgray_border",this).text().trim();item.itm_quantity=formatQuantity(jQuery(".text2",this).val());e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function mindfactory(){var e=new Array;costs.shipping=29.99;costs.price=hwvsFixPrice(jQuery(".colorblue.size12.bold").text().trim().substring(2));costs.vat=hwvsFixPrice(jQuery(".colorblue.size12.bold").closest(".floatRight").find(".colorgrey.size9").text().trim().substring(2));costs.total="€"+(costs.shipping+parseInt(costs.vat)+parseInt(costs.price));costs.shipping="€"+costs.shipping;e.push(replaceVars(costs,before));jQuery(".floatLeft.width760.bordergreybottom.patb10.cart_art").each(function(t){item.itm_url=jQuery("a:eq(0)",this).attr("href");item.itm_name=jQuery("a:eq(0)",this).attr("title");item.itm_price="€"+hwvsFixPrice(jQuery(".size12.bold.pab15",this).text().replace(/\*/,"").substring(2));item.itm_quantity=formatQuantity(jQuery(".size12.inputborder",this).val());e.push(replaceVars(item,format))});e.push(replaceVars(costs,after));return e}function addVAT(e,t){return(e*(1+parseInt(t,10)/100)).toFixed(2)}function formatQuantity(e){e=parseInt(e,10);e=e>1?e+" x ":"";return e}function hideBuildBox(){document.getElementById("darkDiv").style.display="none";document.getElementById("build_info").style.display="none";return false}function getPageWidth(){var e=document.body;var t=document.documentElement;return Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)}function getPageHeight(){var e=document.body;var t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}function popoutTextarea(e){window.document.onkeydown=function(e){if(e.keyCode==27){hideBuildBox()}};if(document.getElementById("build_info")!=null){document.getElementById("build_post").innerHTML=e;document.getElementById("darkDiv").style.display="block";document.getElementById("build_info").style.display="block"}else{var t=500;var n=300;var r=document.createElement("div");r.setAttribute("id","darkDiv");r.setAttribute("onclick","hideBuildBox()");r.setAttribute("style","top: 0px; left: 0px; background: #000000; position: absolute; z-index: 998; width: "+getPageWidth()+"px; height: "+getPageHeight()+"px; opacity: 0.5;");var i=document.createElement("div");i.setAttribute("id","build_info");var s="position: absolute;";s+="z-index: 999;";s+="top: "+(window.innerHeight/2-n/2)+"px;";s+="left: "+(window.innerWidth/2-t/2)+"px;";s+="height: "+n+"px;";s+="width: "+t+"px;";s+="background: #f4a223;";s+="border: 10px solid #f4a223;";s+="box-shadow: 0px 0px 3px #222;";s+="border-radius: 20px;";s+="-webkit-border-radius: 20px;";s+="-moz-border-radius: 20px;";i.setAttribute("style",s);var o=document.createElement("div");o.setAttribute("style","font-size: 20px; font-weight: 900;");o.appendChild(document.createTextNode("Your build info"));var u=document.createElement("a");u.setAttribute("style","cursor: pointer; float: right; margin: -20px auto;");u.setAttribute("onclick","return hideBuildBox();");u.appendChild(document.createTextNode("Close [x]"));var a=document.createElement("textarea");a.setAttribute("id","build_post");a.setAttribute("onclick","select();");a.setAttribute("cols","1");a.setAttribute("rows","1");a.setAttribute("style","width: "+(t-5)+"px; height: "+(n-50)+"px;");a.appendChild(document.createTextNode(e));var f=document.createElement("div");f.setAttribute("style","height: 5px;");var l=document.createElement("a");l.setAttribute("onclick","emptyBasket(); hideBuildBox(); return;");l.setAttribute("style","cursor: pointer;");var c=document.createElement("img");c.setAttribute("src","http://www.fluffy88.com/images/shopping-basket-icon.png");c.setAttribute("style","margin: 5px 5px -5px auto; -moz-transform: scaleY(-1); -webkit-transform: scaleY(-1); -o-transform: scaleY(-1); transform: scaleY(-1); filter: flipv;");l.appendChild(c);l.appendChild(document.createTextNode("Empty Bastet"));i.appendChild(o);i.appendChild(u);i.appendChild(a);i.appendChild(f);i.appendChild(l);i.appendChild(f);document.body.appendChild(i);document.body.appendChild(r)}window.location.hash="#"}function init_script(){var e=window.location.hostname;var t=window.location.pathname;var n=window.location.search;if(e.match(/scan\.co\.uk/i)){window.emptyBasket=function(){$(".btQtyField").each(function(e){$(this).attr("value",0)});window.location=document.getElementById("ctl00_ContentPlaceHolder2_buttonRecalcBasket2").href};if(t.match(/basket/i)){popoutTextarea(scan().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.href="https://secure.scan.co.uk/aspnet/shop/basket.aspx"}}}else if(e.match(/hardwareversand\.de/i)){window.emptyBasket=function(){window.location.search="basket.remAll=1"};if(t.match(/basket\.jsp/i)){popoutTextarea(hwvs().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="basket.jsp"}}}else if(e.match(/dabs/i)){window.emptyBasket=function(){$(".ajax-delete").each(function(e){$(this).click()})};if(t.match(/basket/i)){popoutTextarea(dabs().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="basket"}}}else if(e.match(/memoryc/i)){window.emptyBasket=function(){jQuery('input[name^="quantity"]').each(function(e){jQuery(this).attr("value",0)});document.f.submit()};if(t.match(/checkout/i)){popoutTextarea(memoryc().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="buy/checkout.html"}}}else if(e.match(/overclockers\.co\.uk/i)){window.emptyBasket=function(){var e=document.getElementById("shoppingBkt").rows;for(var t=1;t<e.length-4;t++){e[t].cells[2].getElementsByTagName("input")[0].value=0}document.getElementsByName("update")[0].click()};if(t.match(/viewcart/i)){popoutTextarea(overclockers().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="viewcart.php"}}}else if(e.match(/amazon/i)){window.emptyBasket=function(){jQuery("p.quantity input").attr("value","0");jQuery('input[name="submit.update"]').click()};if(t.match(/cart\/view\.html/i)){popoutTextarea(amazon().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="gp/cart/view.html/ref=gno_cart"}}}else if(e.match(/newegg/i)){window.emptyBasket=function(){document.getElementById("chkItemHeader").click();window.location=document.getElementById("removeFromCart").href};if(t.match(/ShoppingCart/i)){popoutTextarea(newegg().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.href="http://secure.newegg.com/Shopping/ShoppingCart.aspx"}}}else if(e.match(/aria\.co\.uk/i)){window.emptyBasket=function(){window.location.search="operation=shoppingBasketClear"};if(t.match(/ShoppingBasket$/i)){popoutTextarea(aria().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="myAria/ShoppingBasket"}}}else if(e.match(/specialtech\.co\.uk/i)){window.emptyBasket=function(){window.location.search="mode=clear_cart"};if(t.match(/cart\.php$/i)){popoutTextarea(specialtech().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="spshop/customer/cart.php"}}}else if(e.match(/komplett\.ie/i)){window.emptyBasket=function(){document.getElementById("ctl00_siteContentPlaceHolder_shoppingCart_dlgShoppingCart_lbFooterRemoveAll").click()};if(t.match(/shoppingcart/i)){popoutTextarea(komplett().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="Komplett/site/shoppingcart/default.aspx"}}}else if(e.match(/computeruniverse/i)){window.emptyBasket=function(){window.location.search="delete=all"};if(t.match(/cart/i)&&n==""){popoutTextarea(computeruniverse().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="en/cart.asp"}}}else if(e.match(/mindfactory/i)){window.emptyBasket=function(){jQuery('input[type="checkbox"]').each(function(){jQuery(this).attr("checked","true")});jQuery(".sprites_general .b_text + input").click()};if(t.match(/shopping_cart/i)){popoutTextarea(mindfactory().join("\n"))}else{var r=confirm("Would you like to be redirected to your basket?");if(r){window.location.pathname="shopping_cart.php"}}}else{alert("Sorry this tool does not work with this website.")}}var item=new Object;var costs=new Object;if(typeof format=="undefined"){var format='{itm_quantity}[URL="{itm_url}"]{itm_name}[/URL]|{itm_price}'}if(typeof before=="undefined"){var before="[TABLE][B]Item[/B]|[B]Price[/B]"}if(typeof after=="undefined"){var after="Shipping|{shipping}\n[B]Total[/B]|[B]{total}[/B][/TABLE]"}
